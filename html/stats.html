<div class="container beer-cards">
  <div class="row" ng-if="statsCtrl.loading">
    <div class="col s12 loading">
      <div class="preloader-wrapper big active center-align">
        <div class="spinner-layer spinner-red-only">
          <div class="circle-clipper left">
            <div class="circle"></div>
          </div><div class="gap-patch">
            <div class="circle"></div>
          </div><div class="circle-clipper right">
            <div class="circle"></div>
          </div>
        </div>
      </div>
    </div>
    <p class="center-align red-text loading-text">Spinning up the hamster...</p>
  </div>
  <div class="row" ng-if="!statsCtrl.loading">
    <div class="carousel" carousel>
     <a class="carousel-item" href="#one!">
       <img src="{{statsCtrl.recentTracks[0].image[2]['#text']}}">
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">music_video</i>{{statsCtrl.recentTracks[0].name}}
       </span>
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">person</i>{{statsCtrl.recentTracks[0].artist['#text']}}
       </span>
       <span class="now-playing-text now-playing" ng-if="statsCtrl.recentTracks[0]['@attr'] && statsCtrl.recentTracks[0]['@attr'].nowplaying">
         <i class="material-icons carousel-icon">equalizer</i>Now Playing
       </span>
       <span class="now-playing-text" ng-if="statsCtrl.recentTracks[0].date && statsCtrl.recentTracks[0].date.uts">
         <i class="material-icons carousel-icon">schedule</i><span time="{{statsCtrl.recentTracks[0].date.uts * 1000}}"></span>
       </span>
     </a>
     <a class="carousel-item" href="#two!">
       <img src="{{statsCtrl.recentTracks[1].image[2]['#text']}}">
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">music_video</i>{{statsCtrl.recentTracks[1].name}}
       </span>
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">person</i>{{statsCtrl.recentTracks[1].artist['#text']}}
       </span>
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">schedule</i><span time="{{statsCtrl.recentTracks[1].date.uts * 1000}}"></span>
       </span>
     </a>
     <a class="carousel-item" href="#three!">
       <img src="{{statsCtrl.recentTracks[2].image[2]['#text']}}">
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">music_video</i>{{statsCtrl.recentTracks[2].name}}
       </span>
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">person</i>{{statsCtrl.recentTracks[2].artist['#text']}}
       </span>
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">schedule</i><span time="{{statsCtrl.recentTracks[2].date.uts * 1000}}"></span>
       </span>
     </a>
     <a class="carousel-item" href="#four!"><img src="{{statsCtrl.recentTracks[3].image[2]['#text']}}">
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">music_video</i>{{statsCtrl.recentTracks[3].name}}
       </span>
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">person</i>{{statsCtrl.recentTracks[3].artist['#text']}}
      </span>
      <span class="now-playing-text">
        <i class="material-icons carousel-icon">schedule</i><span time="{{statsCtrl.recentTracks[3].date.uts * 1000}}"></span>
      </span>
     </a>
     <a class="carousel-item" href="#five!">
       <img src="{{statsCtrl.recentTracks[4].image[2]['#text']}}">
       <span class="now-playing-text">
         <i class="material-icons carousel-icon">music_video</i>{{statsCtrl.recentTracks[4].name}}
       </span>
      <span class="now-playing-text">
     <i class="material-icons carousel-icon">person</i>{{statsCtrl.recentTracks[4].artist['#text']}}
       </span>
     <span class="now-playing-text">
       <i class="material-icons carousel-icon">schedule</i><span time="{{statsCtrl.recentTracks[4].date.uts * 1000}}"></span>
     </span>
   </a>

   </div>
  </div>
  <ul class="collapsible popout" data-collapsible="accordion">
    <li ng-repeat="recentTrack in statsCtrl.recentTracks" ng-if="!statsCtrl.loading && $index >= 4">
      <div class="collapsible-header"><i class="material-icons">queue_music</i>{{recentTrack.name}}</div>
      <div class="collapsible-body">
        <div class="col s12 m6 recently-played-expand">
          <h4>{{recentTrack.artist['#text']}}</h4>
          <p>
            Played <span time="{{recentTrack.date.uts * 1000}}"></span>
          </p>
        </div>
        <div class="row">
          <div class="col s12 m6 recently-played-expand">
            <img src="{{ recentTrack.image[2]['#text'] }}" alt="">
          </div>
        </div>
      </div>
    </li>
  </ul>
  <h1 ng-if="!statsCtrl.loading">Top Artists This Week</h1>
  <ul class="collection" ng-if="!statsCtrl.loading">
    <li class="collection-item avatar" ng-repeat="topArtist in statsCtrl.weeklyArtists">
      <img src="{{topArtist.image[1]['#text']}}" alt="{{topArtist.name}}" class="circle">
      <span class="title">{{topArtist.name}}</span>
      <p>
        {{topArtist.playcount}} plays this week
      </p>
      <a href="#!" class="secondary-content" ng-if="$index < 3"><i class="material-icons leaderboard" ng-class="{gold: $index === 0, silver: $index === 1, bronze: $index === 2}" >grade</i></a>
    </li>
  </ul>
  <h1 ng-if="!statsCtrl.loading">Top Tracks This Week</h1>
  <div class="row" ng-repeat="topTrack in statsCtrl.weeklyTracks" ng-if="!statsCtrl.loading">
    <div class="col s12">
      {{topTrack.name}}
      {{topTrack.playcount}}
      {{topTrack.artist.name}}
    </div>
  </div>
  <div ng-if="statsCtrl.error">
    <div class="row">
      <div class="col s12 m4 center-align">
        <img class="sad-mac" src="../assets/sad_mac.jpg" alt="error">
      </div>
      <div class="col s12 m8">
        <h3 class="header">{{statsCtrl.error}}</h3>
      </div>
    </div>
  </div>
</div>
